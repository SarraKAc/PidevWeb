{% extends 'back-office.html.twig' %}

{% block title %}Service index{% endblock %}

{% block body %}
    <div class="container">
        <div class="row">
            <div class="col text-center">
                <h1 class="blue">Liste des Services</h1>
            </div>
        </div>
        <div class="row">
            <div class="col text-right">
                <button type="button" class="btn btn-primary">Promo</button>
            </div>
        </div>
    </div>


    {#    <form action="{{ path('app_service_rechercher#}







{#') }}" method="GET" style="text-align: right;">#}
{#        <label>#}
{#            <input type="text" name="keyword" class="text-field" placeholder="  Recherche..." style="width: 200px; height: 30px;">#}
{#        </label>#}

{#        <button type="submit" class="button white-text" style="font-size: 15px; padding: 8px 15px;">Recherche</button>#}
{#    </form>#}





    <table class="table"  >
        <thead>
        <tr>
            <th class="blue">Nom </th>
            <th class="blue">Titre </th>
            <th class="blue">Durée</th>
            <th class="blue">Domaine</th>
            <th class="blue">Prix</th>
            <th class="blue">PrixSoldé</th>

            <th class="blue">Actions</th>
        </tr>
        </thead>
        <tbody>
        {% for service in services %}
            <tr>
                <td>{{ service.nomService }}</td>
                <td>{{ service.titreService }}</td>
                <td>{{ service.tmpservice }}</td>
                <td>{{ service.domaine }}</td>
                <td>{{ service.prix }} Tokens</td>
                <td>{{ service.prixSolde }} Tokens</td>


                <td>
                    <a href="{{ path('app_service_show', {'idService': service.idService}) }}" class="btn btn-primary">Détail</a>
                    <a>|</a>
                    <a href="{{ path('app_service_edit', {'idService': service.idService}) }}" class="btn btn-primary">Modifie</a>
                    <a>|</a>
                    <a href="{{ path('app_avis_new2', {'idService': service.idService}) }}" class="btn btn-primary">Rating</a>

                </td>
            </tr>
            <tr class="table-separator">
                <td colspan="8"></td>
            </tr>
        {% else %}
            <tr>
                <td colspan="8">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <a href="{{ path('app_service_new') }}">Ajouter Service</a>
    <script>
        document.getElementById('btnCalculerPromo').addEventListener('click', function() {
            // Fais une requête AJAX vers ton contrôleur Symfony
            var xhr = new XMLHttpRequest();
            xhr.open('GET', '{{ path('app_calculer_promo') }}', true);
            xhr.onload = function() {
                if (xhr.status >= 200 && xhr.status < 300) {
                    // Succès de la requête
                    alert('Promo calculée avec succès!');
                    // Actualise la page ou effectue d'autres actions si nécessaire
                    location.reload();
                } else {
                    // Erreur lors de la requête
                    alert('Une erreur est survenue lors du calcul de la promo.');
                }
            };
            xhr.send();
        });
    </script>
{% endblock %}
